# Lab 13: Kubernetes Monitoring and Init Containers
### [kube-prometheus](https://github.com/prometheus-operator/kube-prometheus#kubeprometheus) included in this package:
#### The Prometheus Operator:
[BASED VIDEO](https://www.youtube.com/watch?v=ha2LjlD6g7g&ab_channel=TechWorldwithNana)

Operator is needed for stateful application in k8s. k8s doesn't know natively
how to manage lifecycle of stateful application and due to that we provide external
automated operator that says k8s how to properly manage application.
Most of the stateful application have operators. The prometheus also provides it.

#### Highly available Prometheus

Just default prometheus service. Needed for storing and providing metrics. 
Use pql language for extracting metrics info

#### Highly available Alertmanager

Needed for redirecting all alerts from, for example, Prometheus server to any system: email, telegram, slack

#### Prometheus node-exporter

Needed for export metrics of hardware and OS for *NIX systems. 

#### Prometheus Adapter for Kubernetes Metrics APIs

Needed for determine which metrics from default k8s metrics should be taken

#### kube-state-metrics

Needed to generate base metrics from k8s and expose them as enpdoint for, for example, for Prometheus to scrap.

#### Grafana

Service for vizualization metrics, logs, etc. Provide many templates for graph that can show most of the cases.
Can take data from different sources, such as InfluxDB, Loki, Prometheus, etc.


There is can be issue with node exporter. Can be solved by https://github.com/prometheus-community/helm-charts/issues/2983

### Grafana dashboards
a. ![](grafana-pics/memory-usage.png)
b. ![](grafana-pics/pod-usage.png)
c. ![](grafana-pics/node-usage.png)
d. ![](grafana-pics/kubelet-usage.png)
e. ![](grafana-pics/network-usage.png)
f. ![](grafana-pics/alert-usage.png)
![](grafana-pics/alert-manager.png)