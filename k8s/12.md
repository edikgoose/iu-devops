# Lab 12. Configmaps

## Task 2
Let's save the following config to configmap:
```json
{
  "databaseUrl": "http://database:5432",
  "retryStrategy": {
    "numberOfRetries": 5,
    "timeoutSteps": [
      10,
      50,
      100,
      500
    ]
  }
}
```


Configmap manifest keeps in `configmap.yaml` file
```
apiVersion: v1
kind: ConfigMap
metadata:
  name: app-python-config-map
data:
  config.json: |-
{{ .Files.Get "files/config.json" | indent 4}}
```

```
$ kubectl describe configmaps app-python-config-map
Name:         app-python-config-map
Namespace:    default
Labels:       app.kubernetes.io/managed-by=Helm
Annotations:  meta.helm.sh/release-name: app-python
              meta.helm.sh/release-namespace: default

Data
====
config.json:
----
{
  "databaseUrl": "http://database:5432",
  "retryStrategy": {
    "numberOfRetries": 5,
    "timeoutSteps": [
      10,
      50,
      100,
      500
    ]
  }
}

BinaryData
====

Events:  <none>
```

```
$ kubectl get po
NAME                                    READY   STATUS    RESTARTS      AGE
app-python-d8f48f5fb-mkpb7              2/2     Running   0             2m45s
app-python-d8f48f5fb-n47hc              2/2     Running   0             2m45s
app-python-d8f48f5fb-s2m8q              2/2     Running   0             2m45s
vault-0                                 1/1     Running   2 (65m ago)   8d
vault-agent-injector-5cd8b87c6c-rctsv   1/1     Running   2 (65m ago)   8d
```

```
$ kubectl exec app-python-d8f48f5fb-mkpb7 -- cat /app/configs/config.json
Defaulted container "app-python" out of: app-python, vault-agent, vault-agent-init (init)
{
  "databaseUrl": "http://database:5432",
  "retryStrategy": {
    "numberOfRetries": 5,
    "timeoutSteps": [
      10,
      50,
      100,
      500
    ]
  }
}
```